# 🚨 SQL 실행 순서 (매우 중요!)

## 문제 상황
- `user_id` 컬럼이 없어서 외래 키 제약 오류 발생
- 테이블 간 참조 관계 때문에 순서대로 실행해야 함

---

## ✅ 실행 순서 (반드시 이 순서대로!)

### 1️⃣ 현재 상태 확인
**📁 파일**: `01-check-current-status.sql`
**📂 위치**: `C:\Users\dudu\Documents\GitHub\vietnam-student-backend\`
- 먼저 실행해서 현재 어떤 테이블과 컬럼이 있는지 확인
- 결과를 보고 다음 단계 진행

### 2️⃣ users 테이블 수정
**📁 파일**: `02-fix-users-table.sql`
**📂 위치**: `C:\Users\dudu\Documents\GitHub\vietnam-student-backend\`
- users 테이블의 user_id 컬럼 문제 해결
- agencies 테이블도 자동으로 생성
- admin 계정 자동 생성

### 3️⃣ students 테이블 수정
**📁 파일**: `03-fix-students-table-safe.sql`
**📂 위치**: `C:\Users\dudu\Documents\GitHub\vietnam-student-backend\`
- student_code 컬럼 추가
- 다른 누락된 컬럼들 추가
- users 테이블이 정상이어야 실행 가능

### 4️⃣ 나머지 테이블 생성
**📁 파일**: `create-remaining-tables.sql`
**📂 위치**: `C:\Users\dudu\Documents\GitHub\vietnam-student-backend\`
- consultations, audit_logs, menu_items 등
- 모든 기본 테이블이 준비된 후 실행

---

## 📋 체크리스트

- [ ] `01-check-current-status.sql` 실행 → 현재 상태 확인
- [ ] `02-fix-users-table.sql` 실행 → users 테이블 수정
- [ ] `03-fix-students-table-safe.sql` 실행 → students 테이블 수정
- [ ] `create-remaining-tables.sql` 실행 → 나머지 테이블 생성

---

## ⚠️ 주의사항

1. **순서를 꼭 지켜주세요!**
   - users 테이블이 먼저 정상이어야 students 테이블 수정 가능
   - students 테이블이 정상이어야 consultations 테이블 생성 가능

2. **오류가 발생하면**
   - `01-check-current-status.sql`을 다시 실행해서 상태 확인
   - 오류 메시지와 함께 현재 상태를 알려주세요

3. **성공 메시지 확인**
   - 각 스크립트 실행 후 "완료!" 메시지가 나와야 함
   - 테이블 구조가 표시되면 성공

---

## 🎯 최종 목표

모든 스크립트 실행 후:
- ✅ users 테이블에 user_id 컬럼 존재
- ✅ students 테이블에 student_code 컬럼 존재
- ✅ 모든 테이블 간 외래 키 관계 정상
- ✅ admin 계정으로 로그인 가능